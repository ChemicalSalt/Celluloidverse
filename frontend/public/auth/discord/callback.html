<!DOCTYPE html>
<html>
<head>
  <title>Discord Login Callback</title>
</head>
<body>
  <h1>Logging in with Discord...</h1>

  <script>
  async function getDiscordToken(code) {
    const params = new URLSearchParams();
    params.append("client_id", "1407663145295679539");
    params.append("client_secret", "YOUR_CLIENT_SECRET"); // replace with your secret
    params.append("grant_type", "authorization_code");
    params.append("code", code);
    params.append("redirect_uri", "https://celluloidverse-7d324.web.app/auth/discord/callback");

    const response = await fetch("https://discord.com/api/oauth2/token", {
      method: "POST",
      headers: {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      body: params.toString()
    });

    const data = await response.json();
    console.log("Discord Access Token:", data.access_token);
    document.body.innerHTML += `<p>Access Token: ${data.access_token}</p>`;
    return data.access_token;
  }

  const urlParams = new URLSearchParams(window.location.search);
  const code = urlParams.get("code");

  if (code) {
    getDiscordToken(code);
  }
  </script>

</body>
</html>
